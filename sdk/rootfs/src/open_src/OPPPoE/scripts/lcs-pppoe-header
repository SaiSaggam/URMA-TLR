#!/bin/sh

export LD_LIBRARY_PATH="$LD_LIBRARY_PATH:/ram/lib:/lib:/lib/iptables"
export PATH="$PATH:/tmp:/usr/bin:/bin:/usr/sbin:/sbin:/usr/bin/scripts"
export SHELL="/bin/sh"

# Define 
NAT_FILE="/var/run/lcs-pppoe.nat"
IFACE_FILE="/var/run/lcs-pppoe.iface"
PAP_SECRETS="/etc/ppp/pap-secrets"
CHAP_SECRETS="/etc/ppp/chap-secrets"
DNS_FILE="/etc/resolv.conf"
PPP_DNS_FILE="/etc/ppp/resolv.conf"
LINUX_PLUGIN="/etc/ppp/plugins/rp-pppoe.so"
IP_UP="/etc/ppp/ip-up-lcs"
IP_DOWN="/etc/ppp/ip-down-lcs" 
NETDEV="/proc/net/dev"
PROUTE_RULE="/var/run/proute.rule"
LCS_DM_FILE="/var/run/lcs-dmfilter"
MAX_SRT=8
MAX_PRT=16

# Config 
CSID_C_LOCAL_WANTYPE="0x00010003"
CSID_S_LOCAL_WAN_IF_NAME="0x8001000b"
CSID_S_LOCAL_WAN_STATUS="0x80010007"
CSID_C_PPPOE_LCS_ENABLE="0x00040022"
CSID_C_PPPOE_LCS_SERVER="0x00040023"
CSID_C_PPPOE_LCS_NAT_DISABLE="0x00040024"
CSID_C_PPPOE_LCS_CHECK="0x00040025"
CSID_C_PPPOE_LCS_USER="0x00040121"
CSID_C_PPPOE_LCS_PASSWORD="0x00040221"
CSID_C_PPPOE_LCS_SERVICENAME="0x00040621"
CSID_C_PPPOE_LCS_IF_PRIDNS="0x00040721"
CSID_C_PPPOE_LCS_IF_SECDNS="0x00040821"
CSID_C_PPPOE_LCS_MTU="0x00040a21"
CSID_C_PPPOE_LCS_IDLETIME="0x00040b21"
CSID_C_PPPOE_LCS_CNT_TYPE="0x00040921"
CSID_C_PPPOE_LCS_KA_LCP_INTERVAL="0x00040e21"
CSID_C_PPPOE_LCS_KA_LCP_TIMES="0x00040f21"
CSID_C_PPPOE_LCS_PRT_ENABLE="0x00040030"
CSID_C_PPPOE_LCS_PRT_ADDR="0x00040040"

# Status 
CSID_S_LOCAL_WAN_GW="0x80010004"
CSID_S_PPPOE_LCS_CNT_TIME="0x80040121"
CSID_S_PPPOE_LCS_IF_IP="0x80040221"
CSID_S_PPPOE_LCS_IF_NM="0x80040321"
CSID_S_PPPOE_LCS_IF_GW="0x80040421"
CSID_S_PPPOE_LCS_IF_PRIDNS="0x80040521"
CSID_S_PPPOE_LCS_IF_SECDNS="0x80040621"
CSID_S_PPPOE_LCS_CNT_STATUS="0x80040721"
CSID_S_PPPOE_LCS_ACNAME="0x80040002"
CSID_S_PPPOE_LCS_ALTERED="0x80040A21"
CSID_S_PPPOE_LCS_IF_NAME="0x80040C01"
CSID_S_PPPOE_LCS_ACNAME="0x80040002"

PPPOE_CNT_STATUS_DISCONNECT=0
PPPOE_CNT_STATUS_CONNECTING=1
PPPOE_CNT_STATUS_CONNECT=2
PPPOE_CNT_STATUS_DISCONNECTING=3
PPPOE_CNT_STATUS_WAIT_TRAFFIC=5
PPPOE_CNT_STATUS_AUTH_FAIL=6 

# System
CSID_S_SYS_IF_WAN0="0x8000F361"
CSID_S_SYS_IF_BR0="0x8000F301"
CSID_C_LOCAL_LANIP="0x00010004"
CSID_C_LOCAL_LANNM="0x00010005" 
CSID_S_PPPOE_CNT_STATUS="0x80040700"
CSID_S_LOCAL_WAN_PRIDNS="0x80010005"
CSID_S_LOCAL_WAN_SECDNS="0x80010006"

flush_rtcache()
{
    ip route flush cache > /dev/null 2>&1 #(some model has no ip command)
    echo -1 > /proc/sys/net/ipv4/route/flush # flush cache 
}
