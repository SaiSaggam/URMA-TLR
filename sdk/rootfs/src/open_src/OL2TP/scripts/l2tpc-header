#!/bin/sh

TUN_LIST="0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15"

L2TP_CNT_TYPE_ONDEMAND=0
L2TP_CNT_TYPE_AUTORECONNECT=1
L2TP_CNT_TYPE_MANUAL=2  

L2TP_DETECT_SERVER_BY_PORTSCAN=0
L2TP_DETECT_SERVER_BY_PING=1
L2TP_NO_DETECT=2

L2TP_LCP_TYPE_AUTO=0
L2TP_LCP_TYPE_MANUAL=1
L2TP_LCP_TYPE_DISABLE=2

L2TP_AUTH_DEFAULT=0
L2TP_AUTH_ACCEPT=1
L2TP_AUTH_REJECT=2  

CSID_C_L2TP_USER=0x00060100
CSID_C_L2TP_PASSWORD=0x00060200
CSID_C_L2TP_P1FIXED_IP=0x00060300
CSID_C_L2TP_P1FIXED_NM=0x00060400
CSID_C_L2TP_P1FIXED_GW=0x00060500
CSID_C_L2TP_LNS_SERVER=0x00060600
CSID_C_L2TP_P1FIXED_PRIDNS=0x00060700
CSID_C_L2TP_P1FIXED_SECDNS=0x00060800
CSID_C_L2TP_CNT_TYPE=0x00060900
CSID_C_L2TP_MTU=0x00060a00
CSID_C_L2TP_IDLETIME=0x00060b00
CSID_C_L2TP_HOLDOFFTIME=0x00060c00
CSID_C_L2TP_AUTHTYPE=0x00060d00
CSID_C_L2TP_PHASE1_TYPE=0x00060e00
CSID_C_L2TP_PORT=0x00060f00
CSID_C_L2TP_ENABLE_MPPE=0x00064300
CSID_C_L2TP_ENABLE_MPPE_40=0x00064301
CSID_C_L2TP_ENABLE_MPPE_56=0x00064302
CSID_C_L2TP_ENABLE_MPPE_128=0x00064303

CSID_C_L2TP_CLI_ENABLE=0x00061000
CSID_C_L2TP_CLI_QOS_ENABLE=0x00061001    
CSID_C_L2TP_CLI_DETECT_LNS=0x00061002
CSID_C_L2TP_CLI_USER_ENABLE=0x00061100
CSID_C_L2TP_CLI_TUNLNAME=0x00061200
CSID_C_L2TP_CLI_PEERIP=0x00061300
CSID_C_L2TP_CLI_USER=0x00061400
CSID_C_L2TP_CLI_PASSWORD=0x00061500
CSID_C_L2TP_CLI_ROUTE=0x00061600
CSID_C_L2TP_CLI_CONNECT_TYPE=0x00061700
CSID_C_L2TP_CLI_MPPE=0x00061800
CSID_C_L2TP_CLI_NAT=0x00061900
CSID_C_L2TP_CLI_CCP_ENABLE=0x00061a00
CSID_C_L2TP_CLI_PEERIP_STR=0x00061b00

CSID_C_L2TP_CLI_DO_AUTH=0x00061d00       
CSID_C_L2TP_CLI_AUTH_PAP=0x00061e00      
CSID_C_L2TP_CLI_AUTH_CHAP=0x00061f00     
CSID_C_L2TP_CLI_AUTH_MSCHAP=0x00063000   
CSID_C_L2TP_CLI_AUTH_MSCHAPV2=0x00063100 

CSID_C_L2TP_CLI_LOCAL_IP=0x00063200      
CSID_C_L2TP_CLI_REMOTE_IP=0x00063300     

CSID_C_L2TP_CLI_LCP_TYPE=0x00063400      
CSID_C_L2TP_CLI_LCP_INTERVAL=0x00063500  
CSID_C_L2TP_CLI_LCP_FAILURE=0x00063600  

CSID_S_L2TP_CLI_ALTERED=0x80060011 
CSID_S_L2TP_CLI_PEER_CONNT_ID=0x80060012 
CSID_S_L2TP_CLI_PEER_PID=0x80060b00 
CSID_S_L2TP_CLI_PEER_VIRTUAL_IP=0x80060c00 
CSID_S_L2TP_CLI_PEER_REMOTE_IP=0x80060d00 
CSID_S_L2TP_CLI_PEER_IFNAME=0x80060e00
CSID_S_L2TP_CLI_PEER_CNT_STATUS=0x80061000

CSID_C_LOCAL_WANTYPE=0x00010003
CSID_C_LOCAL_LANIP=0x00010004
CSID_C_LOCAL_LANNM=0x00010005
CSID_C_LOCAL_HOSTNAME=0x00010001
CSID_S_LOCAL_WAN_GW=0x80010004
CSID_S_LOCAL_WAN_IF_NAME=0x8001000b
CSID_S_SYS_INFO_ROM_ID=0x80004210

#Main WAN Status
LOCAL_WAN_STATUS_CONNECT=2
CSID_S_LOCAL_WAN_STATUS=0x80010007 

#3G Autobak Status
AUTOBAK_STATUS_3G_CONNECT=2
CSID_C_3G_AUTOBAK_ENABLE=0x001e000d
CSID_S_3G_AUTOBAK_STATUS=0x801e1200

#Failover Status
FAILOVER_STATUS_CONNECT=1
CSID_S_FAILOVER_STATUS=0x80430600

#LoadSharing Status
CSID_C_FAILOVER_LOADSHARING_ENABLE=0x004301c0
LOADSHARING_STATUS_CONNECT=2
CSID_S_LOADSHARING_STATUS=0x80430600

#RIPD_FLAG
CSID_S_ROUTING_RESTART_FLAG=0x80130003

#3G MTU
CSID_C_3G_MTU=0x001e000b

get_lan_range()
{
    addr=`get_csid_addr $CSID_C_LOCAL_LANIP`
    lan_ip="`rdcsman $addr ipv4`"

    addr=`get_csid_addr $CSID_C_LOCAL_LANNM`
    lan_mask="`rdcsman $addr ipv4`"

    ip1=$((`echo $lan_ip| cut -d "." -f1` & `echo $lan_mask| cut -d "." -f1`))
    ip2=$((`echo $lan_ip| cut -d "." -f2` & `echo $lan_mask| cut -d "." -f2`))
    ip3=$((`echo $lan_ip| cut -d "." -f3` & `echo $lan_mask| cut -d "." -f3`))
    ip4=$((`echo $lan_ip| cut -d "." -f4` & `echo $lan_mask| cut -d "." -f4`))

    eval $1="$ip1.$ip2.$ip3.$ip4"
    eval $2="$lan_mask"     
}

